/**
  * Description : tsconfig.json - 📌 모노레포 전체를 위한 통합 TypeScript 설정
  * Author : Shiwoo Min
  * Date : 2025-09-02
  *
  * 참고 명령어:
  *   npx tsc --project tsconfig.json --showConfig
  */
{
  "compilerOptions": {
    // 프로젝트의 기본 경로 지정 (모듈 경로 설정을 위한 기준)
    "baseUrl": ".",

    // 모듈 Path 별칭 설정 - 모노레포 패키지들을 쉽게 import
    "paths": {
      // 기존 @repo 스타일 유지 (호환성을 위해)
      "@repo/database": ["./packages/database/src"],
      "@repo/database/*": ["./packages/database/src/*"],
      "@repo/ui": ["./packages/ui/src"],
      "@repo/ui/*": ["./packages/ui/src/*"],
      "@repo/api-contract": ["./packages/api-contract/src"],
      "@repo/api-contract/*": ["./packages/api-contract/src/*"],
      "@repo/core": ["./packages/core/src"],
      "@repo/core/*": ["./packages/core/src/*"],

      // tsconfig.base.json과 통합된 새로운 스타일
      "@apps/*": ["apps/*/src"],
      "@web/*": ["apps/web/src/*"],
      "@admin/*": ["apps/admin/src/*"],
      "@api/*": ["apps/api/src/*"],
      "@e2e/*": ["apps/e2e/src/*"],

      "@database/*": ["packages/database/src/*"],
      "@ui/*": ["packages/ui/src/*"],
      "@api-contract/*": ["packages/api-contract/src/*"],
      "@core/*": ["packages/core/src/*"],
      "@email/*": ["packages/email/src/*"],
      "@testing/*": ["packages/testing/src/*"]
    },

    // 컴파일된 JavaScript 파일이 저장될 디렉터리
    "outDir": "./dist",

    // TypeScript 파일의 루트 디렉터리 지정
    "rootDir": "./",

    // Node.js 환경과 번들러 환경을 모두 지원하기 위한 설정
    "module": "NodeNext",
    "moduleResolution": "NodeNext",

    // 컴파일된 코드의 타겟 ES 버전
    "target": "ES2022",

    // 사용할 라이브러리 정의 (ES 표준 + DOM API + Node.js)
    "lib": ["ES2022", "DOM", "DOM.Iterable"],

    // 타입 정의 파일 경로 지정
    "typeRoots": ["./node_modules/@types"],

    // ESM과 CommonJS 호환성을 위한 설정
    "verbatimModuleSyntax": true,

    // 타입 선언 파일(.d.ts) 생성
    "declaration": true,
    "declarationMap": true,

    // 엄격한 타입 검사 모드 활성화
    "strict": true,
    "noImplicitAny": true,
    "strictPropertyInitialization": false,

    // CommonJS 및 ES 모듈 간 상호 운용성 지원
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,

    // 라이브러리 파일(.d.ts)의 타입 검사를 건너뜀 (빌드 속도 향상)
    "skipLibCheck": true,

    // 디버깅을 위한 소스맵 설정
    "sourceMap": true,
    "inlineSourceMap": false,
    "inlineSources": true,

    // 빌드 설정
    "noEmitOnError": false,
    "allowJs": true,
    "resolveJsonModule": true,

    // 대소문자 일관성을 유지하여 파일을 가져오기 (OS 간 호환성 문제 방지)
    "forceConsistentCasingInFileNames": true,

    // 모노레포에서 빌드 성능 향상을 위한 증분 빌드
    "incremental": true,
    "tsBuildInfoFile": "./dist/.tsbuildinfo",

    // 모듈 간 격리를 보장 (번들러 호환성)
    "isolatedModules": true,

    // 추가적인 엄격한 검사 옵션들
    "noUncheckedIndexedAccess": true,
    "exactOptionalPropertyTypes": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noImplicitOverride": true
  },

  // TypeScript 컴파일에 포함할 파일들 - 모든 패키지와 앱 포함
  "include": [
    "packages/*/src/**/*.ts",
    "packages/*/src/**/*.tsx",
    "apps/*/src/**/*.ts",
    "apps/*/src/**/*.tsx",
    "apps/*/*.ts",
    "apps/*/*.tsx",
    "*.ts",
    "*.tsx"
  ],

  // TypeScript 컴파일 대상에서 제외
  "exclude": [
    "node_modules",
    "dist",
    ".next",
    "out",
    "build",
    "coverage",
    "**/*.test.ts",
    "**/*.test.tsx",
    "**/*.spec.ts",
    "**/*.spec.tsx",
    "**/node_modules",
    "**/dist",
    // Playwright 관련 제외 항목
    "test-results",
    "playwright-report"
  ],
}
